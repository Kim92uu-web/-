<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å†è§ï¼Œé‡‘ç¡•ç</title>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Sans+SC:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* --- åŸºç¡€è®¾ç½® --- */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            background-color: #000;
            height: 100vh; width: 100vw;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
            font-family: 'Noto Sans SC', sans-serif;
            position: relative;
        }

        /* --- éŸ³ä¹æ§åˆ¶æŒ‰é’® (å³ä¸Šè§’) --- */
        #music-btn {
            position: fixed; top: 15px; right: 15px;
            width: 32px; height: 32px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%; z-index: 1000;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; border: 1px solid rgba(255,255,255,0.3);
            font-size: 14px;
        }
        #music-btn.playing { animation: spin 4s linear infinite; background: rgba(255,255,255,0.6); box-shadow: 0 0 10px rgba(255,255,255,0.4); }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* --- èŠå¤©ç•Œé¢ --- */
        #phone-screen {
            width: 100%; height: 100%;
            background: #1c1c1e;
            position: absolute; top: 0; left: 0;
            z-index: 200;
            display: flex; flex-direction: column;
            transition: opacity 1.5s ease;
        }

        .chat-header {
            height: 60px; display: flex; align-items: center; justify-content: center;
            background: #1c1c1e; color: #fff;
            border-bottom: 1px solid #2c2c2e;
            font-size: 17px; font-weight: 500; padding-top: 10px;
        }

        .chat-area {
            flex: 1; padding: 20px;
            display: flex; flex-direction: column; justify-content: flex-end;
            overflow-y: auto; overflow-x: hidden;
        }

        /* æ¶ˆæ¯è¡Œä¸æ°”æ³¡ */
        .msg-row {
            display: flex; flex-direction: column; width: 100%;
            margin: 6px 0; opacity: 0;
            animation: popIn 0.3s forwards;
        }
        .msg-row.sent { align-items: flex-end; }     /* Useråœ¨å³ */
        .msg-row.received { align-items: flex-start; } /* Jinåœ¨å·¦ */

        .bubble {
            max-width: 85%; padding: 12px 16px;
            border-radius: 18px; font-size: 15px; line-height: 1.5;
            word-wrap: break-word; position: relative;
        }
        .bubble.received { background: #2c2c2e; color: #fff; border-bottom-left-radius: 4px; } /* å·¦ä¾§ç°è‰² */
        .bubble.sent { background: #0A84FF; color: #fff; border-bottom-right-radius: 4px; }     /* å³ä¾§è“è‰² */

        /* æ‹’æ”¶æç¤º UI - çº¢è‰²æ„Ÿå¹å· */
        .error-wrapper {
            display: flex; align-items: center; justify-content: flex-end;
            width: 100%; margin-top: 5px;
        }
        .error-icon {
            width: 18px; height: 18px; border-radius: 50%;
            background: #ff3b30; color: white;
            font-weight: bold; font-size: 12px;
            display: flex; justify-content: center; align-items: center;
            margin-right: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        .error-text { font-size: 12px; color: #8e8e93; }

        .input-area {
            padding: 15px; padding-bottom: 40px;
            background: #1c1c1e; border-top: 1px solid #2c2c2e;
        }
        .fake-input {
            width: 100%; padding: 12px 15px;
            background: #000; border-radius: 20px;
            color: #fff; font-size: 15px; min-height: 44px;
            display: flex; align-items: center;
        }
        #real-input {
            width: 100%; padding: 12px 15px;
            background: #000; border: none; border-radius: 20px;
            color: #fff; font-size: 15px; outline: none; display: none;
        }
        #send-btn {
            position: absolute; right: 25px; bottom: 50px;
            color: #0A84FF; font-weight: bold; cursor: pointer; display: none;
        }

        .typing-cursor::after { content: '|'; animation: blink 1s infinite; color: #0A84FF; margin-left: 2px; }
        
        /* å¼€å§‹é®ç½© */
        .start-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 300;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #fff; transition: opacity 0.5s; cursor: pointer;
        }

        /* --- ä¿¡ä»¶åœºæ™¯ --- */
        #letter-scene {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #050505;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none;
            transition: opacity 2s ease;
            font-family: 'Ma Shan Zheng', cursive;
            perspective: 1000px;
        }
        #letter-scene.active { opacity: 1; pointer-events: auto; }

        #rain-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }

        .envelope-wrapper {
            position: relative; width: 80vw; max-width: 320px; height: 55vw; max-height: 220px;
            background: #4a3b32; border-radius: 5px; box-shadow: 0 10px 30px rgba(0,0,0,0.6);
            cursor: pointer; z-index: 20; transition: transform 0.5s;
        }
        .lid {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border-top: 110px solid #5d4a3f; border-left: 160px solid transparent; border-right: 160px solid transparent;
            transform-origin: top; transition: transform 0.8s ease 0.5s, z-index 0.2s 0.5s; z-index: 30; pointer-events: none;
        }
        .lid.open { transform: rotateX(180deg); z-index: 1; }
        .pocket {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
            border-bottom: 110px solid #6b564a; border-left: 160px solid transparent; border-right: 160px solid transparent;
            z-index: 25; pointer-events: none;
        }
        .seal {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 46px; height: 46px; background: #8B0000; border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3); z-index: 40;
            display: flex; justify-content: center; align-items: center;
            color: rgba(255,255,255,0.4); font-size: 14px; border: 2px dashed rgba(255,255,255,0.1);
            transition: opacity 0.5s, transform 0.5s;
        }
        .seal.broken { opacity: 0; transform: translate(-50%, -50%) scale(1.5); pointer-events: none; }

        .letter {
            position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%);
            width: 90%; height: 90%;
            background: #f4e4bc; background-image: linear-gradient(#e3d1a8 1px, transparent 1px); background-size: 100% 30px;
            border-radius: 4px; padding: 20px; box-shadow: 0 0 5px rgba(0,0,0,0.1);
            z-index: 5; transition: all 1s ease 0.8s;
            overflow: hidden; display: flex; flex-direction: column;
        }
        .letter.open {
            position: fixed; top: 10%; bottom: 10%; height: auto; width: 90vw; max-width: 400px;
            left: 50%; transform: translateX(-50%); z-index: 100; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            overflow-y: auto; -webkit-overflow-scrolling: touch; padding-bottom: 50px;
        }
        .text-line { opacity: 0; margin-bottom: 10px; font-size: 18px; line-height: 30px; color: #2c2c2c; flex-shrink: 0; }
        .fade-in { animation: fadeInEffect 1.5s forwards; }

        /* --- ç‡ƒçƒ§ç…§ç‰‡ --- */
        .polaroid-container {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(5deg) scale(0);
            width: 250px; padding: 15px 15px 50px 15px;
            background: #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 200; opacity: 0; transition: all 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        .polaroid-container.show { opacity: 1; transform: translate(-50%, -50%) rotate(-3deg) scale(1); }
        .photo-img { width: 100%; height: 220px; object-fit: cover; filter: sepia(0.3) contrast(1.1); background: #eee; }
        
        .burning { animation: burnAway 2.5s forwards; pointer-events: none; }
        @keyframes burnAway {
            0% { filter: brightness(1); opacity: 1; mask-image: linear-gradient(to bottom, black 100%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, black 100%, transparent 100%); }
            40% { filter: brightness(1.5) sepia(1) hue-rotate(-30deg); }
            100% { 
                filter: brightness(0) blur(10px); opacity: 0; 
                transform: translate(-50%, -40%) rotate(10deg) scale(0.9);
                mask-image: radial-gradient(circle, transparent 100%, black 100%);
                -webkit-mask-image: radial-gradient(circle, transparent 100%, black 100%);
            }
        }
        .fire-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, rgba(255,100,0,0.6) 0%, transparent 70%);
            opacity: 0; mix-blend-mode: hard-light; pointer-events: none;
        }
        .burning .fire-overlay { animation: fireFlash 2.5s forwards; }
        @keyframes fireFlash { 0% { opacity: 0; } 20% { opacity: 1; } 100% { opacity: 0; } }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        @keyframes popIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInEffect { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <!-- éŸ³ä¹æ§åˆ¶å¼€å…³ -->
    <div id="music-btn">ğŸµ</div>

    <!-- æ¢æºï¼šä½¿ç”¨ä¸€ä¸ªå…¼å®¹æ€§æ›´å¥½çš„å¤–é“¾ (æ‚²ä¼¤é’¢ç´æ›²) -->
    <audio id="bgm" loop preload="auto">
        <source src="https://files.catbox.moe/pye04m.mp3
" type="audio/mpeg">
    </audio>
    
    <!-- ç‡ƒçƒ§éŸ³æ•ˆ -->
    <audio id="fire-sound" preload="auto">
        <source src="https://www.soundjay.com/nature/fire-1.mp3" type="audio/mpeg">
    </audio>

    <!-- é˜¶æ®µä¸€ï¼šåˆå§‹ç•Œé¢ -->
    <div id="phone-screen">
        <div class="start-overlay" id="start-btn">
            <div style="font-size: 20px; margin-bottom: 10px;">North Water County</div>
            <div style="font-size: 12px; color: #aaa; margin-bottom: 30px;">ğŸ§ æˆ´ä¸Šè€³æœºä½“éªŒæœ€ä½³</div>
            <div style="border: 1px solid #fff; padding: 10px 20px; border-radius: 20px;">ç‚¹å‡»å¼€å§‹</div>
        </div>
        <div class="chat-header">é‡‘ç¡•ç (Jin)</div>
        <div class="chat-area" id="chat-box"></div>
        <div class="input-area">
            <div class="fake-input typing-cursor" id="fake-input-text"></div>
            <input type="text" id="real-input" placeholder="ç»™ä»–å‘æœ€åä¸€æ¡ä¿¡æ¯..." maxlength="20">
            <div id="send-btn">å‘é€</div>
        </div>
    </div>

    <!-- é˜¶æ®µäºŒï¼šä¿¡ä»¶ç•Œé¢ -->
    <div id="letter-scene">
        <canvas id="rain-canvas"></canvas>
        <div class="envelope-wrapper" id="envelope">
            <div class="lid" id="lid"></div>
            <div class="letter" id="letter">
                <div class="text-line">Userï¼Œå±•ä¿¡ä½³ã€‚</div>
                <div class="text-line">åŒ—æ°´çš„é›¨å­£åˆè¦åˆ°äº†ï¼Œä¸çŸ¥é“ä½ é‚£é‡Œæœ‰æ²¡æœ‰å¸¦ä¼ã€‚</div>
                <div class="text-line">åŸè°…æˆ‘ç”¨è¿™ç§æ–¹å¼å‘Šåˆ«ï¼Œé¢å¯¹ä½ ï¼Œæˆ‘æ€•æˆ‘ä¼šå¿ƒè½¯ã€‚</div>
                <div class="text-line">æ›¾ç»é‚£ä¸ªç©¿ç™½è¡¬è¡«çš„å°‘å¹´ï¼Œå·²ç»æ­»åœ¨è¿˜ä¸å®Œçš„è´¦å•é‡Œäº†ã€‚</div>
                <div class="text-line">ç°åœ¨çš„æˆ‘åŒæ‰‹å¤ªè„ï¼ŒæŠ±ä¸ç´§ä½ ï¼Œä¹Ÿç»™ä¸äº†ä½ æƒ³è¦çš„æœªæ¥ã€‚</div>
                <div class="text-line">çˆ±æ˜¯çœŸçš„ï¼Œä½†æƒ³è®©ä½ èµ°ä¹Ÿæ˜¯çœŸçš„ã€‚</div>
                <div class="text-line">åˆ«ç­‰æˆ‘äº†ï¼Œé‚£ä¸ªæ— åº•æ´å¤ªæ·±ï¼Œä¸è¯¥æŠŠä½ è¿™æŸå…‰ä¹Ÿæ‹½è¿›æ¥ã€‚</div>
                <div class="text-line">ä½ åº”è¯¥å»æ‰¾ä¸ªèƒ½åœ¨ä¸‹é›¨å¤©ä¸ºä½ é€ä¼çš„äººï¼Œè€Œä¸æ˜¯åƒæˆ‘è¿™æ ·ã€‚</div>
                <div class="text-line">å¿˜äº†æˆ‘ï¼Œè¿™æ˜¯æˆ‘å¯¹ä½ æœ€åçš„è¯·æ±‚ï¼Œä¹Ÿæ˜¯æˆ‘æœ€åçš„çˆ±æ„ã€‚</div>
                <div class="text-line" style="text-align: right; margin-top: 30px;">â€”â€” é‚£ä¸ªå·²æˆè¿‡å»çš„ é‡‘ç¡•ç</div>
                <div style="height: 100px;"></div>
            </div>
            <div class="pocket"></div>
            <div class="seal" id="seal">Jin</div>
            <div style="position:absolute; bottom:-30px; width:100%; text-align:center; color:#888; font-size:12px; animation:blink 2s infinite;" id="open-hint">ç‚¹å‡»å¼€å¯</div>
        </div>
    </div>

    <!-- é˜¶æ®µä¸‰ï¼šç…§ç‰‡ -->
    <div class="polaroid-container" id="photo-card">
        <div class="fire-overlay"></div>
        <!-- âš ï¸ å›¾ç‰‡æ›¿æ¢å¤„ -->
        <img src="https://img.baidu.re/i/2026/01/fv0txk.jpeg" class="photo-img" alt="Memory">
        <div style="text-align: center; color: #333; margin-top: 10px; font-family: 'Ma Shan Zheng'; font-size: 18px;">é‚£å¹´çš„åŒ—æ°´å¿</div>
        <div style="text-align: center; color: #999; font-size: 10px; margin-top: 5px;">ç‚¹å‡»é”€æ¯å›å¿†</div>
    </div>

    <script>
        // --- æ ¸å¿ƒå˜é‡ ---
        const startBtn = document.getElementById('start-btn');
        const phoneScreen = document.getElementById('phone-screen');
        const chatBox = document.getElementById('chat-box');
        const fakeInput = document.getElementById('fake-input-text');
        const letterScene = document.getElementById('letter-scene');
        const bgm = document.getElementById('bgm');
        const fireSound = document.getElementById('fire-sound');
        const musicBtn = document.getElementById('music-btn');
        
        let rainSpeed = 5;

        // --- éŸ³ä¹æ§åˆ¶é€»è¾‘ ---
        function playMusic() {
            bgm.volume = 0.5;
            bgm.play().then(() => {
                musicBtn.classList.add('playing');
            }).catch(e => {
                console.log("Autoplay failed, waiting for interaction");
                musicBtn.classList.remove('playing');
            });
        }

        function toggleMusic() {
            if (bgm.paused) {
                playMusic();
            } else {
                bgm.pause();
                musicBtn.classList.remove('playing');
            }
        }
        musicBtn.addEventListener('click', toggleMusic);

        // --- å¯åŠ¨é€»è¾‘ ---
        startBtn.addEventListener('click', () => {
            startBtn.style.opacity = 0;
            setTimeout(() => startBtn.style.display = 'none', 500);
            
            // ç«‹å³å°è¯•æ’­æ”¾éŸ³ä¹
            playMusic();
            runDramaPart1();
        });

        // --- èŠå¤©åŠŸèƒ½ ---
        async function typeFake(text) {
            fakeInput.innerText = "";
            for (let i = 0; i < text.length; i++) {
                fakeInput.innerText += text[i];
                await new Promise(r => setTimeout(r, 80 + Math.random() * 50)); 
            }
            await new Promise(r => setTimeout(r, 600));
        }
        async function deleteFake() {
            let text = fakeInput.innerText;
            while (text.length > 0) {
                text = text.slice(0, -1);
                fakeInput.innerText = text;
                await new Promise(r => setTimeout(r, 30)); 
            }
        }
        
        // æ ¸å¿ƒä¿®æ”¹ï¼šaddMsg æ”¯æŒå·¦å³åŒºåˆ†
        // type = 'received' (Jin, å·¦ä¾§)
        // type = 'sent' (User, å³ä¾§)
        function addMsg(text, type='received') {
            const row = document.createElement('div');
            row.className = `msg-row ${type}`;
            
            const bubble = document.createElement('div');
            bubble.className = `bubble ${type}`;
            bubble.innerText = text;
            
            row.appendChild(bubble);
            chatBox.appendChild(row);
            chatBox.scrollTop = chatBox.scrollHeight;
            return row; 
        }

        // --- ä¿®æ­£åçš„å‰§æƒ…é€»è¾‘ ---
        async function runDramaPart1() {
            await new Promise(r => setTimeout(r, 800));
            
            // 1. User çŠ¹è±«æ‰“å­— (è¾“å…¥æ¡†æœ‰åŠ¨ç”»ï¼Œä½†æ²¡å‘å‡ºå»)
            await typeFake("æˆ‘ä»¬...è§ä¸€é¢å§ï¼Ÿ");
            await new Promise(r => setTimeout(r, 800));
            await deleteFake(); // åˆ æ‰äº†

            await typeFake("æˆ‘å¥½æƒ³ä½ ");
            await new Promise(r => setTimeout(r, 1000));
            await deleteFake(); // åˆåˆ æ‰äº†

            // 2. Jin çªç„¶å‘æ¥æ¶ˆæ¯ (å‡ºç°åœ¨å·¦ä¾§ received)
            // è¿™é‡Œè¾“å…¥æ¡†ä¸åº”è¯¥æœ‰æ‰“å­—åŠ¨ç”»ï¼Œå› ä¸ºæ˜¯å¯¹æ–¹å‘çš„
            await new Promise(r => setTimeout(r, 500));
            addMsg("æˆ‘ä»¬ç®—äº†å§ã€‚", 'received'); 
            
            await new Promise(r => setTimeout(r, 2000));
            addMsg("åˆ«ç­‰æˆ‘äº†ï¼Œä¸å€¼å¾—ã€‚", 'received');
            
            await new Promise(r => setTimeout(r, 3000));
            
            // 3. è½¬åœº
            phoneScreen.style.opacity = 0;
            setTimeout(() => {
                phoneScreen.style.display = 'none';
                letterScene.classList.add('active');
            }, 1500);
        }

        // --- ä¿¡ä»¶äº¤äº’ ---
        const envelope = document.getElementById('envelope');
        const lid = document.getElementById('lid');
        const letter = document.getElementById('letter');
        const seal = document.getElementById('seal');
        const lines = document.querySelectorAll('.text-line');
        const photoCard = document.getElementById('photo-card');
        let isOpened = false;

        envelope.addEventListener('click', function() {
            if (isOpened) return;
            isOpened = true;
            document.getElementById('open-hint').style.display = 'none';
            seal.classList.add('broken');
            
            setTimeout(() => lid.classList.add('open'), 200);
            setTimeout(() => letter.classList.add('open'), 800);
            
            let delay = 1800;
            lines.forEach((line, index) => {
                setTimeout(() => {
                    line.classList.add('fade-in');
                    rainSpeed += 1;
                    if(index > 4) letter.scrollTop = letter.scrollHeight;
                    if (index === lines.length - 1) setTimeout(() => dropPhoto(), 2000);
                }, delay + (index * 1500)); 
            });
        });

        function dropPhoto() { photoCard.classList.add('show'); }

        photoCard.addEventListener('click', function() {
            if(this.classList.contains('burning')) return;
            
            fireSound.volume = 0.8;
            fireSound.play();
            this.classList.add('burning');
            
            setTimeout(() => {
                // åœæ­¢ç‡ƒçƒ§éŸ³æ•ˆ
                fireSound.pause();
                fireSound.currentTime = 0;
                
                this.style.display = 'none';
                letterScene.style.opacity = 0;
                showFinalInput();
            }, 2400); 
        });

        function showFinalInput() {
            setTimeout(() => {
                phoneScreen.style.display = 'flex';
                phoneScreen.style.opacity = 1;
                document.querySelector('.fake-input').style.display = 'none';
                const realInput = document.getElementById('real-input');
                const sendBtn = document.getElementById('send-btn');
                
                realInput.style.display = 'block';
                sendBtn.style.display = 'block';
                realInput.focus();
                
                sendBtn.addEventListener('click', handleFinalSend);
            }, 500);
        }

        function handleFinalSend() {
            const realInput = document.getElementById('real-input');
            const txt = realInput.value;
            if(!txt) return;

            // 1. User å‘é€æ¶ˆæ¯ (å‡ºç°åœ¨å³ä¾§ sent)
            const lastRow = addMsg(txt, 'sent');
            realInput.value = '';
            
            // 2. æ‹’æ”¶é€»è¾‘
            setTimeout(() => {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-wrapper';
                errorDiv.innerHTML = `
                    <div class="error-text">æ¶ˆæ¯å·²å‘å‡ºï¼Œä½†è¢«å¯¹æ–¹æ‹’æ”¶äº†ã€‚</div>
                    <div class="error-icon">!</div>
                `;
                // æ’å…¥åˆ°æ¶ˆæ¯æ°”æ³¡çš„å¤–éƒ¨
                lastRow.appendChild(errorDiv);
                
                // æ¶ˆæ¯æ°”æ³¡å˜æš—
                lastRow.querySelector('.bubble').style.opacity = 0.6;
                
                // éŸ³ä¹æ·¡å‡º
                let vol = 0.5;
                const fadeOut = setInterval(() => {
                    if(vol > 0) {
                        vol -= 0.05;
                        bgm.volume = Math.max(0, vol);
                    } else {
                        clearInterval(fadeOut);
                        bgm.pause();
                        musicBtn.classList.remove('playing');
                    }
                }, 200);
            }, 600);
        }

        // --- é›¨æ»´ ---
        const rCanvas = document.getElementById('rain-canvas');
        const rCtx = rCanvas.getContext('2d');
        function resizeCanvas() { rCanvas.width = window.innerWidth; rCanvas.height = window.innerHeight; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();

        const rains = [];
        class Rain {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * rCanvas.width;
                this.y = Math.random() * -rCanvas.height;
                this.length = Math.random() * 20 + 10;
                this.speed = Math.random() * 2 + rainSpeed;
            }
            update() {
                this.y += this.speed + (rainSpeed - 5);
                if (this.y > rCanvas.height) this.reset();
            }
            draw() {
                rCtx.strokeStyle = 'rgba(174,194,224,0.3)'; rCtx.lineWidth = 1.5;
                rCtx.beginPath(); rCtx.moveTo(this.x, this.y); rCtx.lineTo(this.x, this.y + this.length); rCtx.stroke();
            }
        }
        for(let i=0; i<100; i++) rains.push(new Rain());
        function animateRain() {
            rCtx.clearRect(0, 0, rCanvas.width, rCanvas.height);
            rains.forEach(r => { r.update(); r.draw(); });
            requestAnimationFrame(animateRain);
        }
        animateRain();
    </script>
</body>
</html>
